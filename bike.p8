pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--start_find
music(0)
function start_over()
bike = {}
bike.x = 70
bike.y = 110
bike.sx = 0
bike.sy = 0
-- offset of y for non-bike
bike.oy = 0
--mid
bike.m = bike.x+2
bike.sprite = 6
bike.moving = true

moveamt = 0.5
maxspd = 6

yspeed = 2

left_edge=8*2
right_edge=8*14

junk = {}
junk_num = 0
junk_amt = 2
end

start_over()


function bike_pos(val)
	bike.x += val
	bike.m += val
end

function move()
	if not bike.moving then
		return
	end
	
	if bike.sx > maxspd then
		bike.sx = maxspd
	end
	if bike.sx < -1*maxspd then
		bike.sx = -1*maxspd
	end
	
	bike_pos(moveamt*bike.sx)
end

function draw_bg()
	map(0,0,0,0,16,8)
	map(0,0,0,64,16,8)
end

function gen_junk()
	if rnd(10)<(10-junk_amt) then
		return
	end
	newj = {}
	newj.sprite = rnd(5) + 36
	newj.x= 17 + rnd(90)
	newj.y=-8
	junk[junk_num] = newj
	junk_num+=1
	for k,v in pairs(junk)	do
		spr(v.sprite,v.x,v.y)
	end
end

function move_junk()
	if not bike.moving then
		return
	end
	for k,v in pairs(junk)	do
		v.y += yspeed
	end
end

function draw_junk()
	for k,v in pairs(junk)	do
		spr(v.sprite,v.x,v.y)
	end
end

function collide()
	bike.moving = false
	bike.sprite = 8
end

function edge_detect()
	if bike.m <= left_edge
		or bike.m >= right_edge then
		collide()
	end
end

function junk_detect()
	for k,v in pairs(junk) do
		if (v.y+3 > bike.y) and
			(v.y < bike.y+7) and
			(bike.m > v.x) and
			(bike.m < v.x + 4) then
				collide()
			end
	end
end

function collision_detect()
	edge_detect()
	junk_detect()
end

function move_y()
	if bike.moving then
		bike.oy += yspeed
	end
end



-- draw the yellow middle line
function yellowstripe()
	-- start with 0 to not
	-- have blank space at top
	for i=0,16 do
		--actual yellow stripe
		spr(1,8*8-1,
		8*(i-1) + bike.oy%8)
		--grass
		spr(12,0,
		8*(i-1) + bike.oy%8)
		spr(13,8,
		8*(i-1) + bike.oy%8)
		spr(10,112,
		8*(i-1) + bike.oy%8)
		spr(11,120,
		8*(i-1) + bike.oy%8)
	end
end



function _update()
 -- collision before or after?
 collision_detect()

	move_y()
	
	gen_junk()
	move_junk()

	if btn(0) then
		bike.sx -= 1
	end
	if btn(1) then
		bike.sx += 1
	end
	
	move()
end

function draw_died()
	if not bike.moving then
		spr(64,44,40)
		spr(65,52,40)
		spr(66,60,40)
		spr(67,68,40)
		spr(80,44,48)
	 spr(81,52,48)
	 spr(82,60,48)
	 spr(83,68,48)
	 spr(96,44,56)
	 spr(97,52,56)
	 spr(98,60,56)
	 spr(99,68,56)
	 spr(112,44,64)
	 spr(113,52,64)
	 spr(114,60,64)
	 spr(115,68,64)
	 
	 if btn(5) then
	 	start_over()
	 end
	end
end

function _draw()
	cls()
	draw_bg()
	yellowstripe()
	draw_junk()
	spr(bike.sprite,bike.x,bike.y)
	draw_died()
end

--end_find
__gfx__
50000000aa00000066666666bbbbbbbb5666666666666665005000000000000005000500a0000000000000000000300000003000000000000000000000000000
80000000aa00000066666666bbbbbbbb566666666666666500500000000500005d5c5d50a0000000000030000000000303000000003000000000000000000000
50000000aa00000066666666bbbbbbbb56666666666666650ccc0000005ddd0c05dc0d00a0000000000000000030000000000030000000000000000000000000
00077000aa00000066666666bbbbbbbb5666666666666665cc8cc00000050dc00ddddd0000000000000000000000030000300000000000000000000000000000
00077000aa00000066666666bbbbbbbb56666666666666650ccc0000000ccdc800ccc000a0000000000000000000000030000000000000000000000000000000
00700700aa00000066666666bbbbbbbb5666666666666665005000000005ddc00c080c00a0000000030000000300000300000000030000000000000000000000
000000000000000066666666bbbbbbbb566666666666666500500000005d5d0cc00000c0a0000000000003000000030003000003000000300000000000000000
000000000000000066666666bbbbbbbb566666666666666500000000000500000000000000000000000000000000000000030000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000550000044400000011000000ee000000330000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000005555000044440000111100008eee0000355b000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000055000000034000001100000050500000330000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008080080800008888800888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000080080000000080008000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000008800000000080008000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000008800000000080008000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000080080000000080008000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000080080000000080008000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000080080000000080000888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00888008888800088000088800088888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08000000080000800800080080000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08000000080000800800080080000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00880000080000888800088800000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008000080000800800080800000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008000080008000080080080000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08880000080008000080080008000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008880080000808888008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080008080000808000008008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080008008008008000008008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080008008008008888008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080008008008008000008080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00080008008888008000008008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008880000880008888008000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303040202020202020202020205030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010c00000f1460f1460f1460f1460f1460f1460f1460f1460f1460f1461a1461a1461a1471a1471a1471a1471a1471a1471a1471a1001a1001e1431e543205431a1471a1471a1471a1001e1471a1001a1001a100
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000

